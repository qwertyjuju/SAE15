<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Résultats tcpdump</title>
        <link rel="icon" href="img/icon2.jpg">
		<link rel="stylesheet" href="css/fonts.css">
		<link rel="stylesheet" href="css/bootstrap.css">
		<link rel="stylesheet" href="css/sitecss.css">
        <script src="js/jquery.min.js"></script>
    </head>
    <body>
		<header>
			<div class="row">
				<div class="col-4">
					<img class="title-img" src="img/index.jpg">
				</div>
				<div class="col-4">
					<h1 class="title">Résultats TCPDUMP</h1>
				</div>
			</div>
		</header>
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
            <div class="container-fluid">
              <a class="navbar-brand" href="#">Navbar</a>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarColor01" aria-controls="navbarColor01" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
              </button>
              <div class="collapse navbar-collapse" id="navbarColor01">
                <ul class="navbar-nav me-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="#">Acceuil
                        <span class="visually-hidden">(current)</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">adresses IP</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Ports</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">A propos</a>
                    </li>
                </ul>
            </div>
        </nav>
        <div class="container">
            <div class="row">
                <div class="openable-frame">
                    <div class="frame-title">
                        <div class="row">
                            <div class="col-6">
                                <h1>Compteur adresses IP</h1>
                            </div>
                            <div class="col-6">
                                <button class="button align-right" onclick="openframe(0)">-/+</button>
                            </div>
                        </div>
                    </div>
                    <div class="openable-frame-body">
                        <div class="row" id="ipframe">
                        </div>
                    </div>
                </div>
            </div>
        </div>
		<footer class="bg-darkgray2">
        </footer>
        <script>
            /* progress bars and openable frame */
            var elems = document.getElementsByClassName("openable-frame")
            var openableFrames = []
            var progressbars = document.getElementsByClassName('progress-bar');
            for (elemnb in elems){
                try{
                    if (elems[elemnb].classList.contains("openable-frame")){
                        openableFrames.push(elems[elemnb])
                    }
                }
                catch (error){
                    if (error instanceof TypeError){}
                    else{
                        throw error
                    }
                }
            }
            for (elementnb in progressbars){
                try{
                    var value = progressbars[elementnb].getAttribute("aria-valuenow")
                    var result= "width: ".concat(value,"%")
                    progressbars[elementnb].setAttribute("style", result)
                }
                catch(error){
                    if (error instanceof TypeError){
                    }
                    else{
                        throw error
                    }
                }
            }
            openableFrames[0].getElementsByClassName("openable-frame-body")[0].classList.add("active");
            function openframe(i){
                if(openableFrames[i].getElementsByClassName("openable-frame-body")[0].classList.contains("active")){
                    openableFrames[i].getElementsByClassName("openable-frame-body")[0].classList.remove("active");
                }
                else{
                    openableFrames[i].getElementsByClassName("openable-frame-body")[0].classList.add("active");
                }
            }

            /* json data */
            var requestURL = window.location.href+"data.json";
            console.log(requestURL);
            var request = new XMLHttpRequest();
            request.open('GET', requestURL);
            request.responseType = 'json';
            request.send();
            request.onload = function() {
                var jsondata = request.response;
                for(element in jsondata){
                    console.log(element)
                }
            }
        </script>
		<script src="js/bootstrap.bundle.min.js"></script>
		<script src="js/prism.js" data-manual></script>
		<script src="js/custom.js"></script>
    </body>
</html>
